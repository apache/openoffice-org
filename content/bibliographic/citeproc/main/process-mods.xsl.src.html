
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"/></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e1">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://purl.org/NET/xbiblio/citeproc</span>"<span class="xmlverb-ns-name"> xmlns:bib</span>="<span class="xmlverb-ns-uri">http://purl.org/NET/xbiblio/citeproc</span>"<span class="xmlverb-ns-name"> xmlns:cs</span>="<span class="xmlverb-ns-uri">http://purl.org/NET/xbiblio/csl</span>"<span class="xmlverb-ns-name"> xmlns:db</span>="<span class="xmlverb-ns-uri">http://docbook.org/ns/docbook</span>"<span class="xmlverb-ns-name"> xmlns:mods</span>="<span class="xmlverb-ns-uri">http://www.loc.gov/mods/v3</span>"<span class="xmlverb-ns-name"> xmlns:xs</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XMLSchema</span>"<span class="xmlverb-ns-name"> xmlns:exist</span>="<span class="xmlverb-ns-uri">http://exist.sourceforge.net/NS/exist</span>"<span class="xmlverb-ns-name"> xmlns:xdoc</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>"<span class="xmlverb-ns-name"> xmlns:xhtml</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/xhtml</span>"<span class="xmlverb-ns-name"> xmlns:xsl</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:course</span>="<span class="xmlverb-ns-uri">http://purl.org/NET/xbiblio/course</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">db xdoc xhtml mods xs cs exist bib course</span>"&gt;<span class="xmlverb-text"><br/>
  </span>&lt;!--<span class="xmlverb-comment"> === licensed under CC-GNU GPL; see http://creativecommons.org/licenses/GPL/2.0 === </span>--&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e5">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e7">short</a></span>&gt;<span class="xmlverb-text">Processes MODS documents into a formatted intermediate representation.</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e10">author</a></span>&gt;<span class="xmlverb-text">Bruce D&#8217;Arcus</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e13">copyright</a></span>&gt;<span class="xmlverb-text">2004, Bruce D&#8217;Arcus</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;!--<span class="xmlverb-comment"> punctuation variables </span>--&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e19">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">bibref-before</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e21">text</a></span> /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e24">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">bibref-after</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e26">text</a></span>&gt;<span class="xmlverb-text">.</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e31">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">bib:noname-substitute</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e33">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e35">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e37">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">creator</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e39">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e41">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e43">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e47">doc</a></span>&gt;<span class="xmlverb-text">The "full" mode renders complete personal names in bibliographies and footnote/endnote<br/>
    style ctiations.</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e50">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:name</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">full</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e52">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sort-order</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e54">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e56">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e58">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">multi-authors</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">element(cs:multiple-authors)?</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e60">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">multi-author-min</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($multi-authors/@min-authors) then ($multi-authors/@min-authors) else xs:integer('999')</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:integer</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e63">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">use-multi-author-handling</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">xs:integer(count(../mods:name[mods:role/mods:roleTerm=$primary-contributors])) ge $multi-author-min</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e65">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e67">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e69">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$use-multi-author-handling</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e71">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e73">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() le xs:integer($multi-authors/@use-first)</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e75">choose</a></span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e77">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sort-order='first-author' and parent::mods:mods</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e79">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family'] | mods:namePart[not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e81">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e83">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e86">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
              <br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e90">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sort-order='first-author' and position() = 1 and parent::mods:mods</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e92">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family'] | mods:namePart[not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e94">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e96">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e99">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e103">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sort-order='all'</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e105">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family'] | mods:namePart[not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e107">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e109">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e112">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e115">choose</a></span>&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e117">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>" /&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e119">otherwise</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
              <br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e124">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e126">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e128">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family' or not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e133">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e135">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e137">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e140">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$multi-authors</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e146">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e148">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e150">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sort-order='first-author' and position() = 1 and parent::mods:mods</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e152">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family'] | mods:namePart[not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e154">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e156">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e159">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e163">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sort-order='all'</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e165">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family'] | mods:namePart[not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e167">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e169">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e172">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e176">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e178">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e180">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[@type='family' or not(@type)]</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e184">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e186">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e188">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last() - 1</span>"&gt;<span class="xmlverb-text"> and </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e191">otherwise</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e197">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  <br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e200">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:name[position() gt 1]/mods:role</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e202">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:name[position()=1]/mods:role</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e204">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e206">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e208">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">role</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e210">choose</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e212">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:roleTerm='editor'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e214">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e216">choose</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e218">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">count(../../mods:name) &amp;gt; 1</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e220">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-terms/cs:roles/cs:role[@term='editor']/cs:renderas/cs:multiple</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e223">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e225">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-terms/cs:roles/cs:role[@term='editor']/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e229">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e232">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:roleTerm='translator'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e234">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e236">choose</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e238">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">count &amp;gt; 1</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e240">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-terms/cs:roles/cs:role[@term='translator']/cs:renderas/cs:multiple</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e243">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e245">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-terms/cs:roles/cs:role[@term='translator']/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e249">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  <br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e255">doc</a></span>&gt;<span class="xmlverb-text">The "short" mode renders just family name(s) commom in author-year citations.</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e259">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:name</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">short</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e261">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">multi-authors</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">element(cs:multiple-authors)</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e263">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">multi-author-use-first</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$multi-authors/@use-first</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:integer?</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e265">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">multi-author-min</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($multi-authors/@min-authors) then ($multi-authors/@min-authors) else xs:integer('999')</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:integer</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e267">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">use-multi-author-handling</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">xs:integer(count(../mods:name[mods:role/mods:roleTerm=$primary-contributors])) ge $multi-author-min</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e269">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e271">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$use-multi-author-handling</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e273">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e275">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() le xs:integer($multi-authors/@use-first)</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e277">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[not(@type='given')]</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e279">choose</a></span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e281">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>"&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e284">otherwise</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"> <br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e289">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e291">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e293">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e296">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$multi-authors</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e302">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e304">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:namePart[not(@type='given')]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e306">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e308">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last()</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e310">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">position() = last() - 1</span>"&gt;<span class="xmlverb-text"> and </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e313">otherwise</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text">        <br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  <br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e320">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:namePart[@type='given']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e322">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e324">choose</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e326">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$style-names/@initialize-with</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e328">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,1,1)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e331">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e333">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e335">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> FIX ME: the following presents rendering difficulties in certain styles </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e342">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-names/@initialize-with</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e346">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:namePart[not(@type='given')]</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e348">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e351">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">bib:year</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e353">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">source</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e355">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e357">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e359">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">year</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e361">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e363">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> we can access newly creatod key element to append suffix </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e367">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">../bib:year-suffix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e369">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e373">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">bib:year-suffix</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e375">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e378">doc</a></span>&gt;<span class="xmlverb-text">Renders complete title/subtitle combination.</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e382">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:titleInfo[not(@type='abbreviated')]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">full</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e384">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e386">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e388">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">font-style</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e390">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">font-weight</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e392">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e394">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">../../@bib:refclass='part-inSerial' and not(../../mods:name[mods:role/mods:roleTerm=$primary-contributors])</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e396">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d27e398">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">title</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e400">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e402">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$font-weight</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e404">attribute</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">font-weight</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e406">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$font-weight</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">attribute</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e410">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$font-style</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e412">attribute</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">font-style</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e414">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$font-style</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">attribute</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e418">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:title</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e420">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:subTitle</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e423">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e429">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:title</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e431">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e434">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:subTitle</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e436">text</a></span>&gt;<span class="xmlverb-text">: </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e439">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e442">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:originInfo</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e444">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e446">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e448">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:place</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-name"><a name="d27e450">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">origin</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e452">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e454">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e456">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e461">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:publisher</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e463">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e465">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e467">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">publisher</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e469">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e471">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e473">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e477">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:place</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e479">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e481">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e483">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">place</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e485">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e487">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:placeTerm</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e489">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;!--<span class="xmlverb-comment"> the following templates need to be combined </span>--&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e496">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:detail[@type='volume']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e498">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e500">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e502">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@type</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e504">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">volume</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e506">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e508">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$locators/cs:locator[@unit=$type]/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e510">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:number</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e512">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e516">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:detail[@type='issue']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e518">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e520">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e522">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@type</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e524">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">issue</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e526">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e528">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$locators/cs:locator[@unit=$type]/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e530">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:number</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e532">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e536">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:detail[@type='file']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e538">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e540">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e542">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@type</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e544">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">file</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e546">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e548">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$locators/cs:locator[@unit=$type]/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e550">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:number</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e552">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e556">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:detail[@type='paragraph']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e558">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e560">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e562">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@type</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e564">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e566">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$locators/cs:locator[@unit=$type]/cs:renderas/cs:single</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e569">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:number</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e571">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e574">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:extent</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e576">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e578">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e580">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">unit</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@unit</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e582">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">locator</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e584">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e586">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$locators/cs:locator[@unit=$unit]/cs:renderas/cs:multiple</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e588">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">mods:start</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e590">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">mods:end</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e592">text</a></span>&gt;<span class="xmlverb-text">&#8211;</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e595">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">bib:number-condense(mods:start,mods:end)</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e598">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e602">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:typeOfResource | mods:issuance</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e605">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:genre</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e607">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e609">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e611">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">genre</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e613">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">genre</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e615">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e617">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$style-terms/cs:genres/cs:genre[@term=$genre]/cs:renderas</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e619">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e623">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:location</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e625">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">source</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e627">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e629">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e631">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e633">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">availability</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e635">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e639">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e642">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:url</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e644">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e646">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@dateLastAccessed</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e648">text</a></span>&gt;<span class="xmlverb-text"> [accessed on </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e651">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">./@dateLastAccessed</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e653">text</a></span>&gt;<span class="xmlverb-text">]</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e658">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:physicalLocation</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e660">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;!--<span class="xmlverb-comment"> TODO: date handling probably needs to be redone as a function </span>--&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e665">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:url/@dateLastAccessed</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e667">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">current</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">current()</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e669">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">month-part</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$month-format[xs:integer(substring($current,6,2))]</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e671">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">day-part</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e673">choose</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e675">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">substring(.,9,1) = '0'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e677">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,10,1)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e680">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e682">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,9,2)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e687">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">date-accessed</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e689">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">substring(.,6,2)</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e691">text</a></span> /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e693">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$month-part</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e696">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">substring(.,9,2)</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e698">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e701">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$day-part</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e704">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">substring(.,6,2)</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e706">text</a></span> /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e709">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">../@dateLastAccessed</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e711">text</a></span>&gt;<span class="xmlverb-text">, </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e714">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,1,4)</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name"><a name="d27e720">doc</a></span>&gt;<span class="xmlverb-text">configures month formatting based on CSL definition</span>&lt;/<span class="xmlverb-element-nsprefix">xdoc</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e723">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">month-format</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">element()*</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e725">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$styles/cs:citationstyle/cs:content/cs:dates/cs:months/cs:month</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e728">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:date | mods:dateIssued</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">month</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e730">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">source</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e732">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e734">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e736">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">current</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">current()</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e738">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e740">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">current() castable as xs:gYearMonth or current() castable as xs:date</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e742">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">month-part</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$month-format[xs:integer(substring($current,6,2))]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d27e744">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">month</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e746">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e748">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$month-part</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e750">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e756">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:date | mods:dateIssued</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">day</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e758">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">source</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e760">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e762">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e764">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">day-part</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e766">choose</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e768">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">substring(.,9,1) = '0'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e770">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,10,1)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e773">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e775">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring(.,9,2)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e780">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">current() castable as xs:date</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-name"><a name="d27e782">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">day</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e784">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e786">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$day-part</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e788">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e793">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:note[@type='citation']</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e795">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prefix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e797">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d27e799">span</a></span> <span class="xmlverb-attr-name">class</span>="<span class="xmlverb-attr-content">note</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e801">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prefix</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e803">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e805">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$suffix</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">span</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d27e809">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mods:physicalDescription | mods:note[not(@type='citation')]</span>" /&gt;<span class="xmlverb-text"><br/>
</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">stylesheet</span>&gt;<br/>
</div>
</tt><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>v
         </body></html>
