
<!--#include virtual="/doctype.html" -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    
    <link href="/css/ooo.css" rel="stylesheet" type="text/css">
    
	<title>OpenOffice.org - Multimediasupport mittels JMF (unter Linux)</title>
	<!-- Start de-header -->
	<link rel="stylesheet" href="../../../styles/de.css" media="screen" type="text/css" />
	<link rel="stylesheet" href="../../../styles/de_print.css" media="print" type="text/css" />
	<link rel="stylesheet" title="mit Navbar" href="../../../styles/de_navbar.css" media="screen" type="text/css" />
	<link rel="alternate stylesheet" title="ohne Navbar" media="screen" href="../../../styles/de_nonavbar.css" type="text/css" />

	<!-- >
	Kommentare zur Seite
	$Id: multimedia_linux.html,v 1.10 2006/01/09 01:16:00 simonaw Exp $
	< -->
	<!-- End de-header -->
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    
    <script src="https://www.apachecon.com/event-images/snippet.js"></script>
  </head>
  <body>
    <!--#include virtual="/de/brand.html" -->
    <div id="topbara">
      <!--#include virtual="/de/topnav.html" -->
      <div id="breadcrumbsa"><a href="/">home</a>&nbsp;&raquo;&nbsp;<a href="/de/">de</a>&nbsp;&raquo;&nbsp;<a href="/de/doc/">doc</a>&nbsp;&raquo;&nbsp;<a href="/de/doc/howto_2_0/">howto_2_0</a>&nbsp;&raquo;&nbsp;<a href="/de/doc/howto_2_0/office/">office</a></div>
    </div>
    <div id="clear"></div>
      
      
    <div id="content">
      
      
<h1>Installation und Konfiguration des Java Media Frameworks (JMF) und externer
	Plugins</h1>

<h2>Übersicht</h2>
	<p>OpenOffice.org 2.0 nutzt zur Medienwiedergabe (Film und Klang) unter Linux das
	Java Media Famework (JMF).<br/>
	Hier erfahren Sie:</p>
	<ul>
		<li>wie Sie das JMF installieren</li>
		<li>wie Sie das JMF unter OpenOffice.org nutzbar machen</li>
		<li>wie Sie zusätzliche JMF-Plugins installieren, um weitere Medientypen zu
		unterstützen</li>
	</ul>
	<p>Windows-Nutzer brauchen nicht weiterzulesen, da unter Windwos &#034;DirectShow&#034;
	verwendet wird.</p>

<h2>Voraussetzungen</h2>
	<p>Um die Medienwiedergabe einzurichten brauchen Sie folgende Komponenten:</p>
	<dl>
		<dt><a href="http://www.java.com/de/">Java Runtime Environment (JRE)</a></dt>
		<dd><p>Das JRE ist die Grundlage für den Mediasupport. Das JRE wird zum
		Ausführen von Java-Software benötigt. Sie müssen nicht das JRE von Sun
		verwenden. Mit anderen JREs kann es aber noch "haken".</p></dd>
		
		<dt><a
			href="http://java.sun.com/products/java-media/jmf/2.1.1/download.html">Java
			Media Framework (JMF)</a></dt>
		<dd><p>Das JMF bietet den Rahmen für die Medienwiedergabe in
		OpenOffice.org. Es unterstützt selbst einige Medienformate, leider aber
		nicht alle. Die im eigentlichen JMF fehlenden Medientypen können Sie mit
		Plugins "nachrüsten".</p></dd>

		<dt><a
			href="http://java.sun.com/products/java-media/jmf/mp3/download.html">JMF
			MP3 Plugin (optional)</a></dt>
		<dd><p>Das MP3-Plugin ermöglicht das Abspielen von Audiodaten im MP3-Format
		mit dem JMF und damit auch mit OpenOffice.org.</p></dd>

		<dt><a
			href="http://jffmpeg.sourceforge.net/">Jffmpeg - ein Codec-Pack für das
			JMF (optional)</a></dt>
		<dd><p>Jffmpeg ist ein Codec-Pack, das das JMF mit fast allen restlichen
		Medientypen erweitert. Mit Jffmpeg können Sie alle vom <a
			href="http://ffmpeg.sourceforge.net/">FFmpeg-Projekt</a> (libavcodec)
		unterstützten Medientypen abspielen.</p></dd>
	</dl>

<h2>Installation der JRE</h2>
	<p>Laden Sie das Installationspaket von <a
		href="http://www.java.com/de/download/">http://www.java.com/de/download/</a>
	herunter. Es gibt verschiedene Downloadformate: Für RPM-basierte und für alle
	anderen Systeme. Beide Formate sind selbstentpackende Dateien. Das Entpacken
	ist skriptgesteuert. Verwenden Sie eine RPM-basierte Distribution, nehmen Sie
	das RPM-Paket. Falls nicht, dann nehmen Sie das andere Paket.</p>
	<p>Die Installation ist unter <a
		href="http://www.java.com/de/download/help/5000010500.xml">http://www.java.com/de/download/help/5000010500.xml</a>
	für beide Varianten ausführlich beschrieben. Folgen Sie einfach den
	Anweisungen.</p>

	<h3>Aktivierung der JRE in OpenOffice.org</h3>
		<img src="./pics/media_optionen_java.png" alt="Optionen - Java"/>
		<p>Nachdem Sie das JRE installiert haben, starten Sie OpenOffice.org.
		Überprüfen Sie unter <code>Extras|Optionen → OpenOffice.org → Java</code>,
		ob die installierte JRE aufgelistet wird (kann etwas dauern). Falls Sie
		das JRE nicht in das Standardverzeichnis <code>/usr/java/</code> installiert haben
		(beispielsweise in Ihr Heimverzeichnis), dann geben Sie bitte den Pfad
		selbst an. Klicken Sie dazu rechts auf "Hinzufügen". Geben Sie in dem
		Dialog das "jre"-Verzeichnis an. Jetzt sollte die neue JRE im Dialog
		aufgelistet werden.</p>
		

<h2>Installation des JMF</h2>
	<p>Vor dem Herunterladen des JMF von der JMF-Download-Seite (<a
		href="http://java.sun.com/products/java-media/jmf/2.1.1/download.html">http://java.sun.com/products/java-media/jmf/2.1.1/download.html</a>)
	lesen Sie sich die Lizenzbedingungen unter "Review License Agreement" durch.
	Sind Sie damit einverstanden, klicken Sie den Punkt "Accept" an. Das
	Installationspaket ist ein selbstentpackendes Archiv. Die
	Installation erfolgt in denselben Schritten wie bei der JRE:</p>
	<ul>
		<li>Öffnen Sie ein Terminalfenster</li>
		
		<li>Mit dem Befehl <code>cd</code> wechseln Sie in das Verzeichnis, in dem Sie
		die Datei gespeichert haben:<br/>
		<code>$ cd ~/{Verzeichnis}</code></li>
		
		<li>Mit dem Befehl <code>chmod</code> die Datei ausführbar machen:<br/>
		<code>$ chmod a+x jmf-2_1_1e-linux-i586.bin</code></li>
		
		<li>Mit dem Befehl <code>su</code> zum Benutzer "root" wechseln (optional,
		ohne root-Rechte können Sie das Paket aber nur für den aktuellen Benutzer
		installieren):<br/>
		<code>$ su</code></li>
		
		<li>Die heruntergeladene Datei ausführen und den Anweisungen folgen:<br/>
		<code># ./jmf-2_1_1e-linux-i586.bin</code></li>
	</ul>
	<p>OpenOffice.org ist es egal wohin das JMF entpackt wird.</p>

	<h3>Einbindung der JMF in OpenOffice.org</h3>
		<p>Wie erwähnt ist es OpenOffice.org egal wohin das JMF entpackt
		wird. Auch eine gesetzte Umgebungsvariable <code>JMFHOME</code> wird von
		OOo ignoriert. Es zählt nur die Classpath-Konfiguration ini OOo.</p>
		<img src="./pics/media_class_path.png" alt="Class Path Einstellungen" />
		<p>Um das JMF nutzen zu können muß die Datei <code>jmf.jar</code> zum
		Classpath des Office hinzugefügt werden. Wählen Sie dazu in Extras|Optionen
		→ OpenOffice.org → Java den Button "Class Path". Im erscheinenden Dialog
		wählen die Schaltfläche "Archiv hinzufügen". Wechseln Sie in das
		Unterverzeichnis <code>lib</code> des JMF. Wählen Sie die jmf.jar aus und
		verlassen Sie die Dialoge mit "OK". Starten Sie OpenOffice.org neu wie es
		die Meldung verlangt.</p>
		<p>Das JMF besteht nicht ausschließlich aus Java-Komponenten. Zumindest
		beim performance-Pack werden einige Komponenten als native libraries
		mitgeliefert. Der Suchpfad für die Laufzeitbibliotheken muß entsprechend angepaßt
		werden. Dazu müssen Sie die Umgebungsvariable <code>LD_LIBRARY_PATH</code>
		setzen. Wie beim Classpath ist auch der <code>LD_LIBRARY_PATH</code> eine
		Liste von Pfadangaben die durch einen Doppelpunkt voneinander getrennt sind.</p>
		<p>Der Befehl schaut folgendermaßen aus:<br/>
		<code>$ export LD_LIBRARY_PATH=/pfad/zu/JMF-2.1.1e/lib</code></p>
		<p>Starten Sie nun OpenOffice.org mittels <code>soffice</code>. Wenn Sie
		alles richtig gemacht haben stellen Multimediainhalte in OOo kein Problem
		mehr dar.</p>
		<p>Sie können den Befehl auch in das soffice-Skript übernehmen, dann
		brauchen Sie den Befehl nicht selbst eingeben. Alternativ dazu können Sie
		ihn auch in ihre sonstigen Startup/Login-Skripte einbauen.</p>
	
	<h3>Ein erster Test</h3>
		<p>Um zu testen ob die Installation des JMF soweit erfolgreich war starten
		Sie OpenOffice.org und öffnen ein leeres Dokument. Öffnen Sie die Gallery
		(Extras|Gallery) und klicken Sie doppelt auf einen Eintrag aus dem Bereich
		"Klänge". Der Media-Player sollte erscheinen und die gewählte Datei
		abspielen.</p>
		<img src="./pics/mediaplayer_sound.png" alt="Mediaplayer spielt Soundfile" />
		<p>Hören Sie den Ton, dann "Herzlichen Glückwunsch!" - die erste Hürde ist
		genommen :-)<br/>
		(als Beispielsvideo können Sie z.B. das Video <a
			href="http://dl.iskon.hr/webcafe/filmici/loading_a_bike.mpg">Motorrad
			einladen</a> (~1.1MB) verwenden)</p>
		<p>Nach all diesen Schritten haben Sie das Grundgerüst erstellt. Schon
		jetzt funktionieren viele Audio- und Videoformate, sollten Sie aber
		Unterstützung für weitere Formate benötigen, so lesen Sie einfach weiter.
		In den folgenden Abschnitten wird erklärt wie man das JMF "aufrüstet".</p>

<h2>Installation eines zusätzlichen Plugins: Das mp3-Plugin</h2>
	<p>Das JMF selbst unterstützt zwar <a
		href="http://java.sun.com/products/java-media/jmf/2.1.1/formats.html">etliche
		Medientypen</a>, viele müssen aber erst nachgerüstet werden. Einfach
	nachzurüsten ist die MP3-Unterstützung. Dafür gibt es bereits ein Plugin
	welches Sie von der JMF-Seite heruntergeladen können.</p>
	<p>Laden Sie sich also das mp3-plugin von <a
		href="http://java.sun.com/products/java-media/jmf/mp3/download.html">http://java.sun.com/products/java-media/jmf/mp3/download.html</a>
	herunter. Das Plugin wird in Form eines Zip-Archivs vertrieben, das 
	die eigentlichen Dateien enthält. Wohin Sie das mp3plugin entpacken ist für
	OpenOffice.org ohne Bedeutung - für OOo zählt nur die "Class Path"
	Einstellung in den Optionen.  Es ist empfehlenswert, daß Sie das Plugin in
	ein Verzeichnis <code>lib/ext</code> oder direkt in das <code>lib</code>-
	Verzeichnis des JMF kopieren. Ganz einfach weil man dann alles beisammen
	hat was zusammengehört. Sie können das Plugin natürlich auch in das
	Verzeichnis <code>lib/ext</code> der JRE installieren. Sie haben die Qual der
	Wahl. :-)</p>

	<h3>Registrierung des Plugins im JMF</h3>
		<p>Damit das mp3-plugin im JMF verwendet werden kann, müssen Sie das Plugin im JMF registrieren.</p>
		<p>Zur Registrierung führen Sie folgende Schritte aus:</p>
		<ul>
			<li>Öffnen Sie ein Terminalfenster</li>
			
			<li>die Umgebungsvariable <code>CLASSPATH</code> setzen, so daß darin
			sowohl das jmf.jar als auch das mp3plugin.jar angegeben werden:<br/>
			<code>$ export CLASSPATH=/pfad/zu/jmf.jar:/pfad/zu/mp3plugin.jar</code><br/>
			(Die Pfade werden durch einen Doppelpunkt getrennt)</li>

			<li>das eigentliche Registrierungskommando ausführen:<br/>
			<code>java com.sun.media.codec.audio.mp3.JavaDecoder</code></li>
		</ul>
		<p>Zum Abschluß der Registrierung sollen Sie als einzige Meldung
		<code>Registered succesfully</code> erhalten. Jede andere Meldung
		ist ein Zeichen für einen Fehler.<br/>
		Hinweis: Haben Sie das JMF als "root" installiert, müssen Sie das Plugin
		ebenfalls als "root" registrieren. Ansonsten kann die Konfigurationsdatei
		des JMF nicht aktualisiert werden.</p>
		<p>Hier ist der Vorgang in einem Screenshot festgehalten. In diesem Beispiel
		wurde das mp3plugin.jar wie oben erwähnt in einen Unterordner
		<code>lib/ext</code> des JMF installiert.</p>
		<img src="./pics/media_register_mp3plugin.png" alt="Registrieren des MP3-Plugins" />

	<h3>Einbindung der Plugins in OpenOffice.org</h3>
		<p>Fügen Sie die Datei mp3plugin.jar, wie bei der Installation des JMF
		beschrieben, dem Classpath von OpenOffice.org hinzu (Extras|Optionen →
		OpenOffice.org → Java, Schaltfläche "Class Path", dann "Archiv
		hinzufügen")</p>

	<h3>Zeit für den zweiten Test</h3>
		<p>Nachdem Sie OpenOffice.org neu gestartet haben können Sie nun die
		MP3-Unterstützung testen. Öffnen Sie dazu den Mediaplayer über Extras|Mediaplayer
		und öffnen Sie eine mp3-Datei. Die Datei sollte nun abgespielt werden.</p>

	
<h2>Installation eines weiteren Plugins: Jffmpeg</h2>
	<p>Nun wird es etwas aufwendiger. Noch hat das JMF keinen Support für ogg
	oder diverse Video-Codecs. Das wird nun geändert. Laden Sie sich Jffmpeg von
	der Seite <a
		href="http://jffmpeg.sourceforge.net/download.html">http://jffmpeg.sourceforge.net/download.html</a>
	herunter (folgen Sie dem Link "Jffmpeg download page").</p>
	<p>Jffmpeg besteht aus zwei Teilen: Einer JMF-Komponente und einer
	Systemkomponente. Die JMF-Komponente unterstützt noch nicht alle Formate die
	libavcodec (FFMPEG) unterstützt, die Systemkomponente schließt diese Lücke
	und dient dazu einfach die normalen System-binaries anzusteuern (<a
		href="http://jffmpeg.sourceforge.net/formats.html">Übersicht der von
		Jffmpeg unterstützen Formate</a>). Laden Sie also beides herunter (sowohl
	jffmpeg-1.0.0.jar als auch libjffmpeg-1.0.0.so). Wieder ist es im Grunde egal
	wo Sie die Dateien hinspeichern, ich empfehle wie auch beim mp3plugin das
	Unterverzeichnis <code>lib/ext</code> des JMF</p>
	<p><strong>Hinweis:</strong> Benennen Sie die Datei
	<code>libjffmpeg-1.0.0.so</code> nach <code>libjffmpeg.so</code> um, da	sie
	ansonsten nicht geladen wird.</p>

	<h3>Registrierung des Plugins im JMF</h3>
		<p>Wie das mp3-Plugin muß auch das Jffmpeg-Plugin beim JMF
		angemeldet werden. Dies ist etwas aufwendiger als beim mp3-Plugin, weil
		das jffmpeg-Plugin keine Registrierungsfunktion mitliefert. Die nötigen
		Einstellungen müssen Sie von Hand ausführen. Das ist aber kein Hexenwerk
		und auch von unerfahrenen Nutzern zu schaffen :-)</p>
		<p>Um das Plugin zu registrieren führen Sie folgende Schritte aus:</p>
		<ul>
			<li>ein Terminal öffnen</li>
			
			<li>die Umgebungsvariable <code>CLASSPATH</code> setzen, so daß darin
			das Archiv jffmpeg-1.0.0.jar enthalten ist (das Archiv jmf.jar wird durch
			das Program jmfregistry automatisch hinzugefügt):<br/>
			<code>$ export CLASSPATH=/pfad/zu/jffmpeg-1.0.0.jar</code></li>

			<li>das Program jmfregistry ausführen (befindet sich im Unterordner
			<code>bin</code> des JMF<br/>
			<code>/pfad/zu/jmfregistry</code></li>
		</ul>
		<p>Beispiel:<br/>
		<code>$ cd ~/JMF-2.1.1e/<br/>
			$ export CLASSPATH=./lib/ext/jffmpeg-1.0.0.jar<br/>
			$ ./bin/jmfregistry</code></p>
		<p>Im Programm jmfregistry müssen nun folgende Einstellungen getätigt werden:</p>
		<p>Im Reiter "Mime Types" folgende Einträge hinzufügen:</p>
		<ul>
			<li>video/vob → vob</li>
			<li>audio/ogg → ogg</li>
		</ul>
		<img src="./pics/media_jmfregistry_mime.png" alt="JMFregistry - Mime-Einstellungen" />
		<p>Im Reiter "Plugins" unter "Demultiplexer" folgende Einträge hinzufügen</p>
		<ul>
			<li>net.sourceforge.jffmpeg.demux.vob.VobDemux</li>
			<li>net.sourceforge.jffmpeg.demux.ogg.OggDemux</li>
		</ul>
		<img src="./pics/media_jmfregistry_demultiplexer.png" alt="JMFregistry - Demultiplexer-Einstellungen" />
		<p>Im Reiter "Plugins" unter "Codec" folgende Einträge hinzufügen</p>
		<ul>
			<li>net.sourceforge.jffmpeg.VideoDecoder</li>
			<li>net.sourceforge.jffmpeg.AudioDecoder</li>
		</ul>
		<img src="./pics/media_jmfregistry_codec.png" alt="JMFregistry - Codec-Einstellungen" />
		<p>Nicht vergessen auch immer den Button "Commit" zu betätigen!</p>

	<h3>Einbindung der Plugins in OpenOffice.org</h3>
		<p>Fügen Sie die Datei jffmpeg-1.0.0.jar dem Classpath von OpenOffice.org hinzu,
		wie bei der Installation des JMF beschrieben (Extras|Optionen →
		OpenOffice.org → Java, Schaltfläche "Class Path", dann "Archiv hinzufügen")</p>
		<p>Um alle Codecs des Jffmpeg-Pakets nutzen zu können müssen Sie die
		native-Komponente verwenden. Dazu muß man sie in den Library-Path mit
		aufnehmen (natürlich müssen auch die ffmpeg-Pakete installiert sein). Wie
		man den Pfad für Laufzeitbibliotheken setzt haben Sie schon weiter oben
		erfahren (bei der JMF-Installation). Fügen Sie einfach den Pfad hinzu in
		dem Sie die native Bibliothek (libjffmpeg.so) gespeichert haben.
		Haben Sie die Jffmpeg-Library in den Unterordner <code>lib/ext</code> des
		JMF installiert, so lautet der Befehl nun<br/>
		<code>$ export LD_LIBRARY_PATH=/pfad/zu/JMF-2.1.1e/lib:/pfad/zu/JMF-2.1.1e/lib/ext</code></p>
		<p>Wieder haben Sie die Möglichkeit den Pfad in das
		OpenOffice.org-Startskript oder in Ihre Loginskripte einzutragen.</p>
		
	<h3>Zeit für den dritten Test</h3>
		<p>Nach einem Neustart von OpenOffice.org können Sie nun die
		OGG-Unterstützung testen. Öffnen Sie dazu den Mediaplayer über Extras|Mediaplayer
		und öffnen Sie eine ogg-Datei. Die Datei sollte nun abgespielt werden.</p>
		<p>Hinweis: Ggf. müssen Sie den Dateitypfilter auf "Alle Dateien (*.*)"
		stellen damit Sie eine ogg-Datei auswählen können.</p>
		<p>Funktioniert auch das, so haben Sie es geschafft. Mit der Kombination
		aus JMF und ffmpeg können Sie nun (fast) alles abspielen.</p>
		<img src="./pics/mediaplayer_video.png" alt="Mediaplayer spielt Videofile" />

<h2>Was tun wenn es nicht funktioniert?</h2>
	<p>Nur keine Panik, das Problem läßt sich sicherlich lösen. Wenden Sie sich
	an unsere <a
		href="http://de.openoffice.org/about-users-mailinglist.html">Mailingliste</a>
	<a href="mailto:users@de.openoffice.org">users@de.openoffice.org</a>.
	Beachten Sie folgende Hinweise:</p>
	<ul>
		<li>Verwenden Sie einen aussagekräftigen Betreff</li>
		<li>Beschreiben Sie *genau* was Sie bereits versucht haben. "Bin
		vorgegangen so wie in der Anleitung beschrieben" ist zu ungenau.
		Beschreiben Sie Schritt für Schritt was Sie wo eingestellt haben</li>
		<li>Beschreiben Sie bei welcher Aktion das Problem auftritt</li>
		<li>Wenn das Problem nur bestimmte Dateien betrifft, schicken Sie einen
		Link zur Datei mit (auf keinen Fall die Datei an die Mailingliste
		schicken!)</li>
		<li>Vergessen Sie auch nicht die Informationen zu dem verwendeten System
		(Distribution, JRE-Version, etc)</li>
	</ul>

<p>
	<a href="http://validator.w3.org/check?uri=referer"><img
		src="http://www.w3.org/Icons/valid-xhtml10"
		alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
</p>

<hr size="1" noshade="noshade" />
<div class="smaller">
<p>Public Documentation License Notice</p>
<p>
The contents of this Documentation are subject to the Public Documentation
License Version 1.0 (the &quot;License&quot;); you may only use this
Documentation if you comply with the terms of this License. A copy of the
License is available at <a href="//licenses/PDL.html">
//licenses/PDL.html</a>.<br/>
The Initial Writer of the Original Documentation is Christian Lohmaier
&lt;cl&#x6f;&#112;h&#x40;&#111;&#112;en&#x6f;f&#102;&#x69;ce.&#x6f;rg&gt;<br/>
Copyright (C) 2005. All Rights Reserved.</p>
<p>contributors are: Frank Hocke</p>
</div>

      
    </div>
    <!--#include virtual="/footer.html" -->
  </body>
</html>
